<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>PROTEZIONE DELLE COMUNICAZIONI</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-transparentGray { background-color: rgba(227, 226, 224, 0); }
.select-value-color-translucentGray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="cc3f0e86-726c-48f2-a34c-f34b767836f4" class="page sans"><header><h1 class="page-title">PROTEZIONE DELLE COMUNICAZIONI</h1><p class="page-description"></p></header><div class="page-body"><ul id="1398ad05-3e10-496e-80a2-1b13b99c2349" class="toggle"><li><details open=""><summary>Teoria</summary><h1 id="bcd24473-b420-4806-ae93-ff7b45c863f5" class=""><mark class="highlight-blue">Transport layer: SSL/TLS</mark></h1><p id="497a044b-4929-4967-8a89-c46efb464151" class="">HTTPS è combinazione di due differenti protocolli:</p><ul id="b2139c4c-320a-422b-a9a9-5ae91c72476b" class="bulleted-list"><li style="list-style-type:disc">HTTP di livello applicativo</li></ul><ul id="714922bc-20b9-460c-b8df-16d79e4404ec" class="bulleted-list"><li style="list-style-type:disc">SSL (successivamente standardizzato ed evoluto in TLS) protocollo indipendente che fornisce un ulteriore livello non presente nello standard TCP/IP di garanzia di autenticità, integrità e riservatezza, collocandosi tra l’applicativo e il trasporto. Tale protocollo standardizza il pacchetto SSL record protocol<figure id="91e9e8ad-3709-4dcb-b259-bf7ab1c7acc6" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled.png"><img style="width:288px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled.png"/></a></figure><p id="3d3a1044-849c-4a08-a25b-4b977a9decad" class="">Visto che non è presente nello standard TCP/IP, i sistemi operativi non presentano nessun layer SSL nello stack TCP/IP e per questo motivo viene realizzato come una serie di funzioni di libreria, che deve essere integrato dalle applicazioni. </p></li></ul><p id="e04eb983-9499-481d-b438-ffbb1c21e0c6" class="">Due entità che comunicano attraverso SSL devono aprire una sessione, un operazione computazionalemente difficile da attuare, ma una volta aperta possono essere presenti più connessioni sicure contemporaneamente. La stipulazione di una sessione avviene tramite l’handshake protocol:</p><ul id="ca959c9a-ff11-430e-9c81-54b0f1634783" class="bulleted-list"><li style="list-style-type:disc">Il client riceve il certificato del server e lo sfida a dimostrare di essere in possesso della chiave privata (semplicemente cifra un messaggio con la chiave pubblica e il server lo deve decifrare con la chiave privata).</li></ul><ul id="c967af6e-5a6f-4ec2-bf0b-c8fd3480a52f" class="bulleted-list"><li style="list-style-type:disc">Successivamente anche l’utente viene autenticato nei confronti del server con lo stesso procedimento visto al punto precedente. Questo processo in internet accade abbastanza raramente. </li></ul><ul id="fd2ddb47-4d5f-460a-a980-11c7f3bf01f8" class="bulleted-list"><li style="list-style-type:disc">Una volta che client e server si sono riconosciuti mutuamente o unilateralmente, negoziano gli algoritmi e le chiavi per la cifratura ed i controlli di integrità. </li></ul><ul id="d6f11ab0-62e7-40d4-b1c1-86279a32de84" class="bulleted-list"><li style="list-style-type:disc">Dopo aver negoziato i set di parametri, tutte queste informazioni vengono memorizzate in una tabella di sessioni. Questo permette di non dover rinegoziare tutto nel caso in cui la sessione cade momentaneamente o quando si aprono più connessioni contemporanee dagli stessi nodi. <figure id="26c1a2b4-84e6-48c0-a1b8-ab04fc28baf7" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%201.png"><img style="width:288px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%201.png"/></a></figure></li></ul><h2 id="64d30c2a-0f67-4463-9dc7-46677afcde56" class=""><mark class="highlight-teal">Vulnerabilità di SSL</mark></h2><p id="7bc7cd6a-fac9-42d9-b62f-94e24fc65732" class="">SSL presenta diverse vulnerabilità:</p><ul id="92412f7a-3734-4d79-843d-2c7c08a8abe7" class="bulleted-list"><li style="list-style-type:disc">A livello di protocollo:<ul id="359121bb-f026-4928-b219-4e77f51085c4" class="bulleted-list"><li style="list-style-type:circle">Utilizzo dell’algoritmo di cifratura RC4 che presenta molte vulnerabilità note</li></ul><ul id="1dbc89a1-96ca-4444-93db-fb5837782de7" class="bulleted-list"><li style="list-style-type:circle">BEAST = attacco con vettore di inizializzazione che permette di decifrare parte del pacchetto.</li></ul><ul id="5c2aaa27-dc99-4859-b409-bfd8c22eb297" class="bulleted-list"><li style="list-style-type:circle">Padding Oracle = in SSL prima si inserisce authentication code poi si cifra il messaggio, ma quello che inserisco dopo la cifratura non è autenticato. Di conseguenza, con la forza bruta, si possono inserire informazioni che verranno poi decifrate. </li></ul><ul id="f62fac39-5983-4ea8-a231-d4adb5e595e1" class="bulleted-list"><li style="list-style-type:circle">POODLE = sempre basato sul concetto di Padding Oracle, ma con l’intento di downgrade. Durante la fase di negoziazione vengono convinte le due parti ad utilizzare SSL versione 3 con diverse vulnerabilità note.</li></ul><ul id="011e871f-2614-492e-8d4b-016bcc690135" class="bulleted-list"><li style="list-style-type:circle">DROWN = uguale al precedente, ma prevede un downgrade fino alla versione 2 con spazio di ricerca delle chiavi a 40 bit (quindi si possono fare attacchi di forza bruta) e permette di rubare la chiave del server </li></ul></li></ul><ul id="58ce6652-bc67-4253-92df-a1920f521f7c" class="bulleted-list"><li style="list-style-type:disc">A livello di implementazione = come nell’implementazione del protocollo heartbeat, protocollo usato per scambiare un pacchetto per mantenere viva la connessione. In SSL è stato implementato in questo modo: <ul id="afa5855e-7bac-4dc9-9f5f-611139ba9fef" class="bulleted-list"><li style="list-style-type:circle">il cliente manda una stringa specificando anche la lunghezza</li></ul><ul id="3905a7f1-6776-4e05-a2bb-90861c3f8114" class="bulleted-list"><li style="list-style-type:circle">Il server rimanda al cliente il numero di caratteri specificato (vero bug dell’implementazione in quanto non viene controllata la congruenza tra la lunghezza della parola e il numero di caratteri inviato). Il server invierà la parola, più i caratteri restanti memorizzati a partire da quell’indirizzo.</li></ul><figure id="57aededa-7453-49cd-846e-9a65efaad8de" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%202.png"><img style="width:384px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%202.png"/></a></figure></li></ul><h2 id="74c64367-50bf-492b-8247-d4211c44a1c3" class=""><mark class="highlight-teal">Funzionamento di HTTPS e alcune vulnerabilità</mark></h2><p id="f4f8f854-3780-4a7a-bb17-cbe34190433c" class=""><span style="border-bottom:0.05em solid">Inganno dell’utente</span></p><p id="0edfd378-bf1f-4b22-a23e-7d73b91bb698" class="">Quando si naviga utilizzando HTTPS il browser, che viene distribuito con anche un database di CA fidate, sfida il dominio ricercato per farsi dimostrare che è in possesso della chiave privata registrata per quel particolare dominio.  In questo caso l’attaccante potrebbe provare a mandare il suo certificato che è stato approvato da una CA per un determinato dominio registrato, ma risulterebbe un errore ancora più plateale in quanto il browser avviserebbe l’utente che il certificato presentato non corrisponde a quello registrato per il dominio cercato. </p><figure id="c8e92640-93f0-4155-97ed-b7771f0b0d53" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%203.png"><img style="width:384px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%203.png"/></a></figure><p id="0db610c2-984e-4cb9-9c2d-f79871e6ccb0" class="">Nel passato un modo per aggirare questo comportamento era quello di confondere visivamente l’utente, tramite codice js, facendolo collegare al sito dell’attaccante regolarmente certificato. Nonostante questo l’utente non se ne rendeva conto in quanto visivamente vedeva un altro sito. </p><figure id="7b6c2dca-b714-485e-8bfb-9c0e5e9da511" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%204.png"><img style="width:384px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%204.png"/></a><figcaption>L’utente si è collegato a www.sitomalevolo.com regolarmente certificato, ma gli appare la scheda di paypal. In questo modo l’attaccante può recuperare le informazioni inserite dall’attaccante. </figcaption></figure><p id="af595004-c496-42e1-bd19-0dda0f9a8dc9" class="">Un altra tipologia di attacco è quella riguardante gli attacchi omografici. Quest’ultimi consistevano nell’ingannare l’utente, illudendo l’utente che vedeva nella barra di ricerca la stessa forma del dominio ricercato, ma in realtà aveva diverso contenuto informativo. Questo deriva dal fatto che il servizio DNS accetta solamente il latino di base, ma IDN presenta anche dominii differenti. Per questo era nato punycode che aveva il compito di convertire dei caratteri internazionali in sequenze di caratteri base. </p><figure id="320168c0-1033-416b-becf-c0deceb0da4c" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%205.png"><img style="width:386px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%205.png"/></a></figure><p id="178cdce0-5461-4d48-8b40-da26099342da" class="">In questo modo alcuni caratteri internazionali assumevano la stessa forma di caratteri latini. Una contro misura è quella di far vedere il punycode. </p><p id="35be645e-5a7d-4c66-84a3-5b7e16d13f42" class=""><span style="border-bottom:0.05em solid">Compromissione di CA</span></p><p id="bfbdf970-105f-4196-8d5f-59af2d8ad117" class="">Il modo più semplice per impersonificare un sito è falsificare il certificato, ovvero compromettere CA, ma esistono degli standard per evitare ciò:</p><ul id="b08f1f50-e852-4dd8-b68a-f8e8a37b6caa" class="bulleted-list"><li style="list-style-type:disc">HTTP public key pinning = è un estensione del protocollo HTTP che permette di comunicare al browser la chiave di un dominio. In questo caso quindi si avrebbe due diversi fonti (estensione di http e certificati) per confrontare la veridicità della chiave. Però, con un MITM è facile da compromettere —&gt; standard deprecato</li></ul><ul id="0ddc7344-7c1e-4d63-a3e0-752575d9d6cd" class="bulleted-list"><li style="list-style-type:disc">Certificate Transparency = è rete peer to peer dove si possono scambiare informazioni sul livello di affidabilità di CA e di conseguenza i proprietari del dominio possono vedere su internet se i certificati sono stati falsificati. </li></ul><p id="ae1d62d2-164e-489f-bad5-63aac180f401" class=""><span style="border-bottom:0.05em solid">HTTP stripping</span></p><p id="08b42aa7-f672-45ab-a2e0-f2f35e20a5d7" class="">Un altro attacco è HTTP stripping, dove ci sono pagine HTTP che per l’invio di dati sensibili utilizzano HTTPS. In questo caso l’attaccante potrebbe intercettare la richiesta HTTP per la pagina HTTPS, modificarne la richiesta e inviare al cliente il form con HTTP. Successivamente l’utente invia la risposta al server, ma prima l’attaccante la intercetta con i dati in chiaro, ne prende i valori e si interfaccia egli stesso con il server.</p><figure id="3c9e7d3a-bbf0-4e45-a157-0ecc66d8a181" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%206.png"><img style="width:432px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%206.png"/></a></figure><p id="8b4cbfba-f1b7-40d4-a5b7-79e4c1f32a6f" class="">Una mitigazione contro questo attacco è HSTS, il quale forza i browser ad interagire tramite HTTPS. </p><h1 id="b76366ea-1dd7-4809-bf03-7508b07cd2c3" class=""><mark class="highlight-blue">Network layer: IPSec</mark></h1><p id="3a90fa91-3038-4c09-978c-203bc7fcf5b4" class="">Nella concezione attuale le VPN (virtual private network) servono principalmente per occultare da dove vengono effettuate le richieste o per evitare un blocco che non permette di navigare su determinati siti da un determinato posto. Infatti un client esegue delle richieste che vengono girate al gestore della VPN che, comportandosi come un vero e proprio proxy, gira le richieste fatte dai client (la sicurezza è nelle mani del gestore di VPN —&gt; lui ovviamente sa ogni richiesta che viene eseguita).  </p><p id="d87d228e-64bf-42ab-a5df-7dafbf572a17" class="">Nella terminologia tradizionale delle reti, VPN è un accordo volontario tra due endpoint per la costruzione di un’architettura logica che trasporta il traffico da una rete ad un’altra, passando per una o più reti pubbliche (dal quale deriva il termine virtual), ma dando ai due endpoint l’illusione di essere collegati in maniera privata ed esclusiva. Il protocollo per la realizzazione di una VPN è IPSec, protocollo totalmente trasparente all’applicazione in quanto è una modifica del pacchetto IP. Infatti, nel campo protocol del pacchetto IP può essere specificato il trasporto di IPSec (solitamente poteva essere TCP, UDP, ICMP). L’unico svantaggio di questo protocollo è che deve essere supportato a livello di SO. </p><figure id="bd253132-0ef8-4a80-95b2-6cf57eeaf614" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%207.png"><img style="width:384px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%207.png"/></a></figure><h2 id="f27f2637-dd62-4605-9827-8ae615ba062f" class=""><mark class="highlight-teal">SA e protocolli di realizzazione</mark></h2><p id="64ca4277-bd86-4ff1-8e9f-9d2db262d585" class="">Il concetto base di IPSec è la creazione di una SA (security association), ovvero una relazione unidirezionale tra mittente e destinatario. In questo contesto, a livello di SO, l’instradamento dei pacchetti sarà lo stesso, ma vengono aggiunte delle tabelle di instradamento speciali, nel caso di Linuz prendono il nome di extended route (eroute), le quali dicono come elaborare il pacchetto secondo quanto scritto dalla SA. La SA può essere di due tipologie differenti:</p><ul id="ff1b2b0d-a5fe-4f33-8351-d21939302286" class="bulleted-list"><li style="list-style-type:disc">Transport mode</li></ul><ul id="5983814a-b1fc-4c8d-b7e7-08840cea2a1c" class="bulleted-list"><li style="list-style-type:disc">Tunnel mode = dove si ha l’incapsulamento di un pacchetto IP all’intero di un altro pacchetto IP con sorgente e destinazione differenti. </li></ul><p id="f3e9aa95-3655-4cf2-b5d5-d55ed7e62f48" class="">Esistono due protocolli per realizzare VPN con IPSec:</p><ul id="e11cf7db-d9b7-4184-9e91-cdbffa67674a" class="bulleted-list"><li style="list-style-type:disc">AH (Authentication header) = serve per  l&#x27;autenticazione e l&#x27;integrità dei pacchetti, con l’aggiunta di un header che contiene una firma digitale del pacchetto IP. A seconda del SA si ha:<ul id="addd4410-be26-4990-9bae-ed32f16ea7a0" class="bulleted-list"><li style="list-style-type:circle">Transport mode = Questo attualmente ha un piccolo difetto in quanto tutte le reti sono mappate (se io da un indirizzo IP privato provo a mandare un pacchetto con AH, il router lo sostituisce con il suo indirizzo pubblico e la firma data da AH non è più funzionale). </li></ul><ul id="c306b6c8-a027-4e4f-90ef-25f87c615171" class="bulleted-list"><li style="list-style-type:circle">Tunnel mode = viene autenticato il pacchetto IP interno.  </li></ul><figure id="0e822faf-7ebd-44f0-bc3b-1a7118fcd7b9" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%208.png"><img style="width:336px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%208.png"/></a></figure></li></ul><ul id="0de3a471-32dc-4567-94e7-e434c2ffd9c2" class="bulleted-list"><li style="list-style-type:disc">ESP (Encapsulating Security Payload) = nasce per fare cifratura, ma in seguito anche autenticazione. Esso consiste nell’aggiunta di un header e un trailer al pacchetto IP. A seconda del SA si ha:<ul id="d3e713c2-5a97-4557-83af-5b1833e3bb32" class="bulleted-list"><li style="list-style-type:circle">Transport mode = senza autenticazione, cifra solamente il pacchetto. Nel caso di autenticazione, oltre alla cifratura del pacchetto viene autenticato il payload del pacchetto ma non l’header.  </li></ul><ul id="f213d5dc-2d67-41a9-8fba-47e0fa5abd75" class="bulleted-list"><li style="list-style-type:circle">Tunnel mode = senza autenticazione, cifra solamente il pacchetto interno. Nel caso di autenticazione, viene cifrato e autenticato l’intero pacchetto IP interno.  </li></ul><figure id="b4f6afc1-7869-487a-9f97-70d3c75e1a42" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%209.png"><img style="width:336px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%209.png"/></a></figure></li></ul><p id="92f6d904-18a7-452c-bb46-b505f9613010" class="">si può ottenere protezione completa usando contemporaneamente più SA. </p><h2 id="5ad682a9-4f3b-4f25-9fb8-0f845346338c" class=""><mark class="highlight-teal">OpenVPN</mark></h2><p id="9e8ec966-e273-42c3-84a2-62854313289f" class="">OpenVPN è un’implementazione ibrida che utilizza TLS e IPSec. OpenVPN riproduce con software in user space i concetti di transport e tunnel mode di IPSec. Questo software deve avere dei permessi di root per la creazione di interfacce virtuali. Queste interfacce funzionano nello stesso identico modo delle interfacce reali: i pacchetti inviati ad un interfaccia reale sono inviate al device driver della scheda di rete, mentre quelli inviata ad un interfaccia virtuale sono inviate al processo che ha creato l’interfaccia. Le due tipologie di SA in OpenVPN sono realizzate in questo modo:</p><ul id="06ecc522-8b1b-4447-84e2-76ae91a09f2e" class="bulleted-list"><li style="list-style-type:disc">Tunnel mode = client e server vogliono comunicare tra loro. Sui security gateway di client e server è presente il processo OpenVPN che crea un interfaccia di rete virtuale tun0. Queste interfacce vengono dichiarate come connesse fisicamente tra loro. Ovviamente la tabella di routing di router-client deve essere configuarata in modo tale che se si vuole raggiungere la rete 10.9.9.0/24 è necessario passare dall’interfaccia tun0 di router-server. In questo modo, tutti i pacchetti per quella determinata destinazione vengono instradati su tun0 dove, grazie all’utilizzo di  TLS viene concordano un canale sicuro. A destinazione, il processo OpenVPN decifra e firma il messaggio, recuperando il pacchetto IP intatto ed eseguendo lo smistamento verso la macchina. <figure id="eee13f56-3915-4a6c-96d2-127b20ba3ffe" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2010.png"><img style="width:432px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2010.png"/></a></figure></li></ul><ul id="0c1e48f9-ecc0-4726-8e28-dfae9d51eb96" class="bulleted-list"><li style="list-style-type:disc">Transport mode = OpenVPN parte sulla macchina client e si collega al server, creando un interfaccia di rete tap0 che presenta come indirizzo IP, un’indirizzo appartenente alla LAN del server. Per questo motivo, quando un pacchetto deve andare dal client al server, visto che le due macchine appartengono alla stessa rete locale, viene eseguito un ARP per identificare l’indirizzo MAC del server e svolgere una consegna diretta. Però, lato server, viene eseguito un bridge software layer 2 tra interfaccia tap0 e quella locale eth1, con la creazione di un interfaccia del tipo br0. Per questo motivo, quando verrà eseguito un ARP dal client, questo verrà emesso su tap0 arrivando sulla macchina server e, a causa del bridge, verrà anche ricevuto da tutte le macchine collegate alla LAN. In questo modo OpenVPN si comporterà da proxy ARP, ovvero si fingerà tutte le macchine connesse alla rete eth1. <figure id="6acc3150-9e19-4bbd-956d-b5711752652b" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2011.png"><img style="width:432px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2011.png"/></a></figure></li></ul><h1 id="505060d1-ca3e-4eed-9795-921b5d0ed9b1" class=""><mark class="highlight-blue">Data link security: VLAN</mark></h1><p id="38e84e00-476f-4422-b58a-f1339806cddb" class="">A livello 2, sono presenti due tipologie di protezioni logiche che prendono il nome di VLAN:</p><ul id="d3d0c497-d7af-49c0-a5e2-446b2a0629ea" class="bulleted-list"><li style="list-style-type:disc">VLAN statica = serve per dire quali porte switch possono parlare con altre porte switch. In questo caso un host può appartenere ad una o più VLAN solo in base alla porta dello switch a cui è connesso. Se abbiamo uno switch e le prime 7 porte rappresentano una VLAN, quei 7 computer possono comunicare solamente tra di loro.  </li></ul><ul id="d847c0b8-d983-49ee-b744-e77c80a0e589" class="bulleted-list"><li style="list-style-type:disc">VLAN dinamica = un host appartiene a una o più VLAN in funzione del proprio MAC o IP, indipendentemente dalla porta dello switch a cui è connesso (meno sicuro perché gli attaccanti possono modificare MAC address). </li></ul><p id="8268150a-74f4-43f4-bec9-d1ae1c8e01c0" class="">Nel caso di più switch come si fa? è stata definita un estensione del protocollo ethernet che permette di taggare i pacchetti con un tag VLAN. Quando un computer appartenente ad una VLAN invia un pacchetto destinato ad un elaboratore facente parte della stessa VLAN ma collegato ad un diverso switch, quest’ultimo viene ricevuto dallo switch a cui è attaccato il dispositivo. Lo switch sarà collegato ad un altro switch tramite una porta in trunk mode, ovvero configurata per appartenere a più VLAN differenti. Il dispositivo contrassegna il pacchetto con lo specifico tag VLAN e lo fa viaggiare fino allo switch che deve raggiungere. Quest’ultimo riconosce il tag della VLAN (porta in trunk mode) e lo recapita alla macchina destinataria. </p><figure id="678cdb32-7c08-4474-8424-6cfb02d946da" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2012.png"><img style="width:336px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2012.png"/></a></figure><p id="bd412aab-dad5-4ce9-a737-1c7a09897bde" class="">In questo modo si possono costruire segmenti di LAN anche se appartenenti a posti diversi e collegati con switch differenti. </p><h2 id="9912c1f7-798a-4135-9a05-e736f62deeac" class=""><mark class="highlight-teal">Vulnerabilità</mark></h2><p id="55b3bffd-fcd8-4b8b-8318-49c303357430" class="">Questa separazione logica tra VLAN può essere attaccata in due modi:</p><ul id="998df2d1-a441-485d-a4d6-c78d5f97449d" class="bulleted-list"><li style="list-style-type:disc">Switched spoofing = il prerequisito per questa vulnerabilità è l’accettazione di una riconfigurazione con protocollo DTP (Dynamic Trunking Protocol), dove l’attaccante fa credere alla vittima di essere uno switch e e la configura in modo tale che la porta a cui è connessa sia il trunk. </li></ul><ul id="922a5754-720d-4822-b484-cb429e6680a8" class="bulleted-list"><li style="list-style-type:disc">Double tagging = il prerequisito è la presenza di una catena di switch con una gestione non attenta di tag annidati e l’attaccante è connesso alla VLAN  V1, quella di default che non l’utilizzo di tag. L’attaccante invia ad un host un pacchetto con tag V2 incapsulato in un tag V1. Lo switch toglie il tag V1 e inoltra il pacchetto a tutte le porte che appartengono a V1, anche il trunk. Il secondo switch lo interpreta come un pacchetto di V2 e lo inoltra all’host vittima. <figure id="8df16b8c-3b56-423d-9944-7a9f28beb8bf" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2013.png"><img style="width:336px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2013.png"/></a></figure></li></ul></details></li></ul><ul id="37644b01-4752-44df-89b5-f59ae97ca2c9" class="toggle"><li><details open=""><summary>Laboratorio</summary><h2 id="3548f5ad-0f96-49d2-8c31-f86974f6985f" class=""><mark class="highlight-blue">Tunnel SSH</mark></h2><p id="95042e30-48e8-458c-bc7e-0ced3b6cbc72" class="">SSH è uno standard che permette la connessione crittografata ad un host remoto. Però, tramite il port forwarding di SSH, il che consiste nell’eseguire il tunneling di qualsiasi porta TCP/IP da client a server o viceversa, il traffico dati di un applicazione può viaggiare all’interno di una connessione SSH crittografata e di conseguenza non può essere intercettata quando è in transito. </p><figure id="bd333405-dad3-40cb-9b45-05c6172d0a8d" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2014.png"><img style="width:538px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2014.png"/></a></figure><p id="ba6fccbd-7105-4762-a90c-f94f4d75bfee" class="">Il port forwarding può essere di 3 tipologie differenti:</p><ul id="31849344-a9d6-41f1-afa5-24d4adc72a45" class="bulleted-list"><li style="list-style-type:disc"><strong>Local port forwarding</strong> = consiste nell’inoltrare una porta della macchina client alla macchina server. Il client SSH ascolta le connessioni su tale porta e quando riceve una connessione, esegue il tunneling della connessione ad un server SSH. Il server si connette ad una porta di destinazione configurata, possibilmente su una macchina differente rispetto a quella del server SSH. <figure id="bd3c81f3-9c30-455a-8eb6-8f7ab4f03cb4" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2015.png"><img style="width:240px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2015.png"/></a></figure><p id="b1f3edf9-1bfd-43d3-856d-9fba9dedefe5" class="">Eseguendo il comando:</p><p id="ce48d80d-8f73-4950-9c2d-884b2c793bf9" class=""><code>ssh -L 8000:127.0.0.1:80 kali@192.168.56.6</code></p><p id="8cebf0f1-29bd-4f4c-af25-9f63f236cd6d" class="">Questo comando apre una connessione cifrata con la macchina kali ed inoltra tutte le richieste che vengono fatte alla porta 8000 della macchina host alla porta 80 del <a href="http://localhost">localhost</a> della macchina kali. Ovviamente di default tutte le macchine possono collegarsi alla porta 8000 dell’host, ma questo si può restringere specificando un indirizzo di collegamento:</p><p id="763940f2-07a3-4258-8cf6-3021536321e5" class=""><code>ssh -L 127.0.0.1:8000:127.0.0.1:80 kali@192.168.56.6</code></p></li></ul><ul id="dd698d02-9d41-41f2-b12e-f3a2b127dba3" class="bulleted-list"><li style="list-style-type:disc"><strong>Remote port forwarding</strong> = permette di rendere disponibile una risorsa locale all’host remoto a cui ci si connette. Infatti, viene creato un tunnel SSH in modo tale che tutto il traffico di una porta dell’host remoto venga ridiretto verso una porta locale dove è presente il nostro applicativo web.<figure id="82401d56-a36c-4363-9d22-052caebf7ee1" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2016.png"><img style="width:240px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2016.png"/></a></figure><p id="98a9153e-be30-460e-ac8f-0db7d504dfad" class="">Eseguendo il comando:</p><p id="8cee42d8-d330-4999-b178-51350e91a425" class=""><code>ssh -R 8000:127.0.0.1:80 s0001021127@192.168.56.1</code></p><p id="d6768eea-b2e8-43c0-a06e-8792ce2f8ad0" class="">Dalla macchina kali si apre una connessione cifrata con la macchina del laboratorio dove tutte le richieste che vengono eseguite sulla porta 8000 della macchina del laboratorio vengono ridirette alla porta 80 del <a href="http://localhost">localhost</a> della macchina kali. → in questo modo si rende accessibile un sito pubblicamente anche se posto su rete privata. </p></li></ul><ul id="50afa366-72d4-4e14-a5e9-55fa1d880141" class="bulleted-list"><li style="list-style-type:disc"><strong>Dynamic forwarding </strong>= questa tipologia necessita l’utilizzo di <strong>proxy SOCKS</strong>. Questa tipologia di proxy, a differenza dei normali proxy HTTP che sono proxy di alto livello che funzionano solamente con pagine web HTTP E HTTPS, è un proxy di basso livello che può funzionare con qualsiasi tipologia di traffico e protocollo.<p id="64c788dd-659e-4068-b85c-2e6a5f6f3f1b" class="">In questo caso, sulla macchina client viene creato un proxy SOCKS in ascolto sulla porta specificata. Tutto il traffico generato viene ridiretto alla porta specificata la quale inoltra il traffico, tramite connessione criptata SSH, al server SSH a cui si è collegato il client. Il server SSH inoltra la richiesta eseguita dal cliente su una porta dinamica sulla macchina di destinazione. Questo forwarding con il seguente comando:</p><p id="02746362-1157-43b8-a57c-878edbbe0324" class=""><code>ssh -D 8080 sec@192.168.56.XX</code></p><figure id="4c105225-af34-4b29-ab5b-a8e183520217" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2017.png"><img style="width:288px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2017.png"/></a></figure></li></ul><h2 id="313c4b30-7fa9-4974-bf46-7901ec03f6a5" class=""><mark class="highlight-blue">TOR</mark></h2><p id="928e2b8d-c0ae-4ac9-aa1a-3a116944fe44" class="">Tor è un sistema per fare instradamento a livello applicativo in overlay rispetto all’instradamento fisico. I client sulle quali è installato un client TOR, quando vogliono navigare nel browser, eseguono una richiesta verso TOR directory che, in modo del tutto casuale, restituisce il CID (circuit ID) e gli indirizzi IP di 3 onion server ovvero:</p><ul id="058e9516-e80d-4708-8247-969bb7aa59d9" class="bulleted-list"><li style="list-style-type:disc">Entry node</li></ul><ul id="453d8f34-2e68-4210-8768-f1df78ddef57" class="bulleted-list"><li style="list-style-type:disc">Nodo intermedio</li></ul><ul id="a061cf66-8553-4eda-a9c9-32a97b5009d1" class="bulleted-list"><li style="list-style-type:disc">Exit node</li></ul><p id="3ae6acf2-fa8d-4d67-b7f8-f49f374039f7" class="">Questi sono server pubblici che vengono offerti in modo volontario da qualsiasi persona. Successivamente il client negozia con ciascuno dei 3 onion server una chiave simmetria con cui cifrare il pacchetto da mandare. Quando viene eseguita una richiesta, viene modificato il pacchetto IP ponendo come indirizzo mittente quello dell’exit node. In seguito il pacchetto cifrato con la chiave concordata con l’exit node ed incapsulato all’interno di un altro pacchetto che vede come mittente il nodo intermedio e come destinatario l’exit node. Quest’ultimo a sua volta viene cifrato con la chiave concordata con il nodo intermedio ed incapsulato all’interno di un pacchetto che presenta come mittente l’entry node e come destinatario il nodo intermedio. Il pacchetto subisce la stessa modifica dei precedenti.</p><figure id="6643560d-3014-40d3-98ff-bf129174b51b" class="image"><a href="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2018.png"><img style="width:432px" src="PROTEZIONE%20DELLE%20COMUNICAZIONI%20cc3f0e86726c48f2a34cf34b767836f4/Untitled%2018.png"/></a></figure><p id="3f49d110-3bec-4d1c-b82f-f9f4b7481dab" class="">Di conseguenza in questo processo non si ha un anonimizzazione al 100%, ma si complica il fatto di risalire all’identità del mittente. Infatti:</p><ul id="07b23a2a-26c5-45cb-9506-c05f8c714673" class="bulleted-list"><li style="list-style-type:disc">L’entry node sa chi è il mittente, vede che deve recapitare il pacchetto al nodo intermedio, ma non sa il contenuto del pacchetto e il destinatario effettivo.</li></ul><ul id="840604ae-94e4-4546-a10f-ae0c61f9e3a5" class="bulleted-list"><li style="list-style-type:disc">Il nodo intermedio sa che il pacchetto viene dall’entry-node e deve essere recapitato all’exit node, ma non sa il contenuto, il mittente e destinatario. </li></ul><ul id="9106b4e8-c774-4ab3-9b51-f81f6b7c6f87" class="bulleted-list"><li style="list-style-type:disc">L’exit node vede che il pacchetto viene dal nodo intermedio e deve andare al destinatario effettivo, vede il contenuto del pacchetto (se non è stato cifrato con altri protocolli) ma non sa il mittente.</li></ul><p id="40cf8813-c4b7-42ef-bb98-6245bf227ba1" class="">L’instradamento al ritorno si basa sulla socket in cui viene ricevuta la risposta, la quale appartiene ad una CID e in base a delle tabelle statiche configurate sui server, sa a quale altro onion server recapitare la risposta. </p><p id="65ed78dd-c665-449c-8b34-3ef9672e00e0" class="">Alcune debolezze:</p><ul id="b78cb530-0a7c-4180-8b34-49a0a48e8cc2" class="bulleted-list"><li style="list-style-type:disc">Ovviamente il pacchetto è un normale pacchetto IP di conseguenza se non viene cifrato grazie ad HTTPS, l’entry node lo può guardare. </li></ul><ul id="c5a59443-e81f-4934-98d8-1aed20c84bbb" class="bulleted-list"><li style="list-style-type:disc">Se l’entry node ed exit node sono offerti dallo stesso sistema, si può capire bene cosa si sta facendo anche se i pacchetti sono cifrati. </li></ul><p id="e54fc8a8-5091-4c43-a03a-715b668cc168" class="">Una contromisura per non far capire che si sta utilizzando TOR è quella dei bridge. Tramite quest’ultima diventa più difficile capire cosa stiamo facendo in quanto sembra che ci si stia collegando ad un server normale che ci fornisce però i 3 onion server necessari per la navigazione. </p></details></li></ul></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>